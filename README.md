# Selection Success Rate Visualizer

Unityエディタ上で3DオブジェクトやUI要素を特定のカメラから見た際の「選択成功率」をリアルタイムで計算・可視化するカスタムエディタウィンドウツールです。

![図1 unity上で実行した様子](https://i.gyazo.com/90cfe030c8ed7422c4112d6e3ef3cb34.png)
*図1: Unityエディタ上での実行イメージ*

## 概要

このツールは、ターゲットとなるオブジェクトが見かけ上どの程度の大きさに見えているか、またユーザーがどの程度の確率でそれを選択（クリック/タップ）できるかを数理モデルに基づいて算出します。

VR/ARコンテンツや3D UIのユーザビリティ評価において、実機テスト前の指針として活用できます。

![図2 動作例](https://i.gyazo.com/29a60299b5c25fbae117a2fee5ca1216.png)
*図2: 動作例*

## インストール方法

Unity Package Manager を使用してインストールします。

1. Unity メニューバーの Window > Package Manager を開きます。
2. 左上の + ボタンを押し、Add package from git URL... を選択します。
3. 以下のURLを入力して Add を押してください。 https://github.com/Fvkuinu/RayCastSuccessPredictor.git

## 設定項目

ウィンドウ内の各項目を設定することで、シチュエーションに合わせた成功率の計算が可能です。

### 1. 基本設定 (Basic Settings)

| 項目名 | 説明 |
| :--- | :--- |
| **基準カメラ** | 計算の視点となるカメラを指定します（Player Camera, VR Headset Cameraなど）。 |
| **ターゲット形状** | ターゲットの形状モデルを選択します。 |

#### ターゲット形状について
* **Circle (円形):**
    * 見かけの幅と高さのうち、小さい方を直径として扱います。
* **Rectangle (矩形):**
    * 見かけの幅と高さをそのまま使用します。
    * > **注意:** このオプションを選択した場合、進行方向xをターゲットに対して定めることができないため、座標系は `WorldSpace`、ポインターなし、距離不使用で固定されます。

---

### 2. 座標系と計算モデル (Coordinate System)

計算の根本となるモデルを選択します。最も重要な設定項目です。

#### ■ WorldSpace
オブジェクトの向きを考慮しない、シンプルで高速な計算モードです。

* **動作:** `Renderer.bounds` や `RectTransform.rect` が持つ、カメラ正面方向のバウンディングボックスサイズをそのまま使用します。
* **用途:** 大まかなサイズ感の確認や、常にカメラに正対している（ビルボード）オブジェクトの評価に適しています。

#### ■ PointerBased
カメラから見たターゲットの「傾き」を考慮する、現実に即した高精度なモードです。

* **動作:** ターゲットの頂点群を「カメラからターゲットへの視線に対して垂直な平面」に投影し、その2D投影領域の幅と高さを計算します。斜めから見たターゲットが小さく見える効果（射影短縮）が正確に反映されます。
* **用途:** /ARなど、ユーザーが様々な角度からオブジェクトを見る状況での正確な評価に適しています。

---

### 3. 詳細オプション (PointerBasedモードのみ)

PointerBasedモード選択時のみ、以下の詳細なパラメータ設定が可能です。

#### ポインター (Pointer)
ユーザーの視線やコントローラーが「実際に指し示している場所」を示すオブジェクト（例：空のGameObject）を設定します。
* ここで設定したポインターとターゲット間の角度ズレが、計算パラメータ `A` として使用されます。

#### 距離(A)を使用 (Use Distance A)
* **ON:** 計算に角度距離 `A` を考慮します。
    * *角度距離 A とは：「カメラ→ポインター」のベクトルと、「カメラ→ターゲット」のベクトルがなす角度です。*
* **OFF:** 角度距離を無視します。

#### muxを使用 (Use mux)
* **ON:** ポインティングの命中分布に水平方向のバイアス `mux` を加えます。
